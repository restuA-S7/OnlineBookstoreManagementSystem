<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js" integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <div class="container mt-5">
        <h1>Form</h1>
        <form asp-controller="Cart" asp-action="Create" method="post">
            <div>BookID</div>
            <div class="input-group mb-3">
                <input type="number" class="form-control text-center" id="bookId" name="BookId" value="@Model.BookId" readonly />
            </div>

            <div>Price</div>
            <div class="input-group mb-3">
                <input type="number" class="form-control text-center" id="displayPrice" name="Price" value="@Model.Price" readonly />
            </div>

            <div>Quantity</div>
            <div class="input-group mb-3">
                <button class="btn btn-outline-secondary" type="button" id="button-minus">-</button>
                <input type="number" class="form-control text-center" id="quantity" name="quantity" min="0" max="@Model.Stock" value="0" />
                <button class="btn btn-outline-secondary" type="button" id="button-plus">+</button>
            </div>

            <div>Total Amount</div>
            <div class="input-group mb-3">
                <input type="number" class="form-control text-center" id="TotalAmount" name="TotalAmount" value="0" readonly />
            </div>

            <input type="hidden" id="price" value="@Model.Price" />

            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>

    <script>
        $(document).ready(function () {
            var price = parseFloat($('#price').val());
            var maxStock = parseInt($('#quantity').attr('max'));

            function updateTotalAmount() {
                var quantity = parseInt($('#quantity').val());
                var totalAmount = price * quantity;
                $('#TotalAmount').val(totalAmount.toFixed(2)); // Assuming you want 2 decimal places
                $('#price').val(price);
            }

            $('#button-plus').click(function () {
                var quantity = parseInt($('#quantity').val());
                if (quantity < maxStock) {
                    $('#quantity').val(quantity + 1);
                    updateTotalAmount();
                }
            });

            $('#button-minus').click(function () {
                var quantity = parseInt($('#quantity').val());
                if (quantity > 0) {
                    $('#quantity').val(quantity - 1);
                    updateTotalAmount();
                }
            });

            $('#quantity').on('input', function () {
                updateTotalAmount();
            });

            // Initialize the total amount on page load
            updateTotalAmount();
        });
    </script>
</body>
</html>
